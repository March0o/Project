function SignIn(){let e=document.getElementById("SignIn/UserInfo"),t=e.children[0].children[0].value,s=e.children[1].children[0].value,n=JSON.parse(localStorage.getItem("AccountData")),l=!1;for(let r=0;r<Object.values(n.users).length;r++){n.users[r].email==t&&n.users[r].password==s&&(console.log("User Found"),l=!0,localStorage.setItem("LoggedUser",JSON.stringify(n.users[r])),location.reload());break}if(!1==l){console.log("User Not Found");let a=document.getElementById("SignInAlertDiv");a.setAttribute("class","alert alert-danger"),a.setAttribute("role","alert"),a.setAttribute("style","margin-top: 1em;"),a.innerHTML="No user found with these credentials, please enter info again"}console.log("worked-ish")}function ChangeDisplay(){let e=JSON.parse(localStorage.getItem("LoggedUser")),t=document.getElementById("Register/SignOut");t.innerHTML="Sign Out",t.setAttribute("href","index.html"),t.setAttribute("onclick","SignOut()");document.getElementById("SignIn/UserInfoBtn").innerHTML="User Information";let s=document.getElementById("SignIn/UserInfo");s.innerHTML="";let n=["First Name","Last Name","E-mail","Password","Saved Card"],l=Object.values(e);for(let r=0;r<n.length;r++){let a=document.createElement("div"),i=document.createElement("label"),g=document.createElement("input");if(i.setAttribute("class","form-label"),g.setAttribute("class","form-control-plaintext"),i.innerHTML=n[r],r==n.length-1){if(""==l[r])g.value="None";else{let o=l[r].split("/")[1];g.value="Card Ending in "+o.substr(o.length-4)}}else g.value=l[r];a.appendChild(i),a.appendChild(g),s.appendChild(a)}}function SignOut(){localStorage.setItem("LoggedUser","Guest"),console.log("New Guest")}!function(){if(null===localStorage.getItem("AccountData")){let e={users:[]};e.users.push({first_name:"testPerson",last_name:"testLastName",email:"test@email.com",password:"test",card_details:""}),localStorage.setItem("AccountData",JSON.stringify(e)),console.log(e)}else console.log(JSON.parse(localStorage.getItem("AccountData")));null===localStorage.getItem("LoggedUser")?(localStorage.setItem("LoggedUser","Guest"),console.log("New Guest")):"Guest"===localStorage.getItem("LoggedUser")?console.log("Guest"):(console.log(JSON.parse(localStorage.getItem("LoggedUser"))),ChangeDisplay())}();
